#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define INPUT_FILE "test.txt"

int cbtd(char *str);
void read_file(){

	FILE *filePointer;
	short memory[4096];
	char *line = NULL;
	size_t length = 0;
	ssize_t output;
	int index;
	char file[255];

	printf("Please enter a full file name with the extension.\n");
	printf("(Up to 20 chars in length)\n");
	scanf(" %255s", file);
	filePointer = fopen(file, "r");

	if (filePointer == NULL){
		printf("File not found: %s \n", file);
		exit(EXIT_FAILURE);
	}
	
	while ((output = getline(&line, &length, filePointer)) != -1){
			memory[index] = cbtd(line);
			index++;
	}

	for(index = 0; index <3; index++){
	printf("%i", memory[index]);
	}

	fclose(filePointer);

}

void main(){
	char binary[] = "0000000000000000";
	int out;
	out = cbtd(binary);
	printf("%i \n", out); 
	read_file();
}

int cbtd(char *str){
	int p, i, j, k, n;
	n = strlen(str);
	int binary[n];
	for(i = 0; i<n; i++){
		binary[i] = str[i] - '0';
	}
	k = 1;
	if(binary[0] == 1){
		for(j = 0; j<n-1; j++){
			k*=2;
		}
		p -= k;

	}
	else{
		p =0;
	}
	for(i=1; i<n; i++){
		k=1;
		if(binary[i] ==1){

			for(j = 0; j<n-(1+i); j++){
				k*=2;
			}
		}
		else{
			k = 0;
		}
	p+=k;
}
}
